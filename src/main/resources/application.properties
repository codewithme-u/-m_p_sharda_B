spring.application.name=Management-System

# ✅ Database Connection (management_system)
# Use Railway-provided JDBC URL if available, otherwise compose from parts.
# Prefer MYSQL_URL (Railway often provides a full JDBC URL)
spring.datasource.url=${MYSQL_URL:jdbc:mysql://${MYSQLHOST:localhost}:${MYSQLPORT:3306}/${MYSQL_DATABASE:management_system}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}

# Credentials (try common Railway vars first)
spring.datasource.username=${MYSQLUSER:${MYSQL_USERNAME:root}}
spring.datasource.password=${MYSQLROOT_PASSWORD:${MYSQLPASSWORD:}}


# ✅ FINAL FIX: Persistence Mode
# 'update' mode preserves your data and modifies the schema incrementally.
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# ✅ Logging
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.authentication=DEBUG

# H2 console (dev)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ✅ Server/Security
server.port=8080
jwt.secret=8r5Q6j7vQwPZr6q8vQp2z8wX9n4c7z5tT8x9e5tU2lK8uP1dG5cR7n3yH6bL2wK4
jwt.expiration=86400000
